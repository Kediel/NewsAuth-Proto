<?xml version="1.0" encoding="utf-8" standalone="no"?><!DOCTYPE svg PUBLIC "-//W3C//DTD SVG 20010904//EN" "http://www.w3.org/TR/2001/REC-SVG-20010904/DTD/svg10.dtd"><svg xmlns="http://www.w3.org/2000/svg" width="1055" height="756" xmlns:xlink="http://www.w3.org/1999/xlink"><source><![CDATA[participant Editor
participant CMS
participant Client
participant Log Server
participant Map Server
participant MySQL
Title: Flow 1. Editor publishes news and contents are committed to the organization's log and map
Editor->CMS: presses publish
CMS->Client: POST /v1/news
Client->Client: key = articleID = sha256(content)
Client->Log Server: addLogLeaf(key, content)
Log Server->MySQL: write
MySQL-->Log Server: ok
Log Server-->Client: proof, isDup
Note right of Client: if isDup=false
Client->Map Server: addMapLeaf(key, content)
Map Server->MySQL: write
MySQL-->Map Server: ok
Map Server-->Client: ok
Note right of Client: endif
Client-->CMS: articleID, proof
CMS-->Editor: success]]></source><desc>Flow 1. Editor publishes news and contents are committed to the organization's log and map</desc><defs><marker viewBox="0 0 5 5" markerWidth="5" markerHeight="5" orient="auto" refX="5" refY="2.5" id="markerArrowBlock"><path d="M 0 0 L 5 2.5 L 0 5 z"></path></marker><marker viewBox="0 0 9.6 16" markerWidth="4" markerHeight="16" orient="auto" refX="9.6" refY="8" id="markerArrowOpen"><path d="M 9.6,8 1.92,16 0,13.7 5.76,8 0,2.286 1.92,0 9.6,8 z"></path></marker></defs><g class="title"><rect x="10" y="10" width="874.140625" height="28.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="15" y="30" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="15">Flow 1. Editor publishes news and contents are committed to the organization's log and map</tspan></text></g><g class="actor"><rect x="10" y="48.21875" width="77.609375" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="73.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Editor</tspan></text></g><g class="actor"><rect x="10" y="697.96875" width="77.609375" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="20" y="723.078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="20">Editor</tspan></text></g><line x1="48.8046875" x2="48.8046875" y1="86.4375" y2="697.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="188.4296875" y="48.21875" width="48.8125" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="198.4296875" y="73.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="198.4296875">CMS</tspan></text></g><g class="actor"><rect x="188.4296875" y="697.96875" width="48.8125" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="198.4296875" y="723.078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="198.4296875">CMS</tspan></text></g><line x1="212.8359375" x2="212.8359375" y1="86.4375" y2="697.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="347.65625" y="48.21875" width="77.609375" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="357.65625" y="73.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="357.65625">Client</tspan></text></g><g class="actor"><rect x="347.65625" y="697.96875" width="77.609375" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="357.65625" y="723.078125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="357.65625">Client</tspan></text></g><line x1="386.4609375" x2="386.4609375" y1="86.4375" y2="697.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="685.3125" y="48.21875" width="116.015625" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="695.3125" y="73.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="695.3125">Log Server</tspan></text></g><g class="actor"><rect x="685.3125" y="697.96875" width="116.015625" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="695.3125" y="722.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="695.3125">Log Server</tspan></text></g><line x1="743.3203125" x2="743.3203125" y1="86.4375" y2="697.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="821.328125" y="48.21875" width="116.015625" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="831.328125" y="73.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="831.328125">Map Server</tspan></text></g><g class="actor"><rect x="821.328125" y="697.96875" width="116.015625" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="831.328125" y="722.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="831.328125">Map Server</tspan></text></g><line x1="879.3359375" x2="879.3359375" y1="86.4375" y2="697.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="actor"><rect x="957.34375" y="48.21875" width="68.015625" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="967.34375" y="73.21875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="967.34375">MySQL</tspan></text></g><g class="actor"><rect x="957.34375" y="697.96875" width="68.015625" height="38.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="967.34375" y="722.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="967.34375">MySQL</tspan></text></g><line x1="991.3515625" x2="991.3515625" y1="86.4375" y2="697.96875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><g class="signal"><text x="58.8046875" y="117.328125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="58.8046875">presses publish</tspan></text><line x1="48.8046875" x2="212.8359375" y1="124.65625" y2="124.65625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="237.234375" y="155.65625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="237.234375">POST /v1/news</tspan></text><line x1="212.8359375" x2="386.4609375" y1="162.65625" y2="162.65625" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="411.4609375" y="196.765625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="411.4609375">key = articleID = sha256(content)</tspan></text><line x1="386.4609375" x2="406.4609375" y1="182.65625" y2="182.65625" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="406.4609375" x2="406.4609375" y1="182.65625" y2="205.875" stroke="#000000" fill="none" style="stroke-width: 2;"></line><line x1="406.4609375" x2="386.4609375" y1="205.875" y2="205.875" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="449.671875" y="231.765625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="449.671875">addLogLeaf(key, content)</tspan></text><line x1="386.4609375" x2="743.3203125" y1="239.09375" y2="239.09375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="843.328125" y="270.09375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="843.328125">write</tspan></text><line x1="743.3203125" x2="991.3515625" y1="277.09375" y2="277.09375" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="857.734375" y="308.09375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="857.734375">ok</tspan></text><line x1="991.3515625" x2="743.3203125" y1="315.09375" y2="315.09375" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="507.28125" y="345.984375" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="507.28125">proof, isDup</tspan></text><line x1="743.3203125" x2="386.4609375" y1="353.3125" y2="353.3125" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="406.4609375" y="373.3125" width="144.421875" height="28.21875" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="411.4609375" y="393.3125" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="411.4609375">if isDup=false</tspan></text></g><g class="signal"><text x="517.6796875" y="432.421875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="517.6796875">addMapLeaf(key, content)</tspan></text><line x1="386.4609375" x2="879.3359375" y1="439.75" y2="439.75" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="911.3359375" y="470.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="911.3359375">write</tspan></text><line x1="879.3359375" x2="991.3515625" y1="477.75" y2="477.75" stroke="#000000" fill="none" style="stroke-width: 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="925.7421875" y="508.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="925.7421875">ok</tspan></text><line x1="991.3515625" x2="879.3359375" y1="515.75" y2="515.75" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="623.296875" y="546.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="623.296875">ok</tspan></text><line x1="879.3359375" x2="386.4609375" y1="553.75" y2="553.75" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="note"><rect x="406.4609375" y="573.75" width="58.015625" height="28" stroke="#000000" fill="#ffffff" style="stroke-width: 2;"></rect><text x="411.4609375" y="593.75" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="411.4609375">endif</tspan></text></g><g class="signal"><text x="222.8359375" y="632.640625" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="222.8359375">articleID, proof</tspan></text><line x1="386.4609375" x2="212.8359375" y1="639.96875" y2="639.96875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g><g class="signal"><text x="97.2109375" y="670.96875" style="font-size: 16px; font-family: &quot;Andale Mono&quot;, monospace;"><tspan x="97.2109375">success</tspan></text><line x1="212.8359375" x2="48.8046875" y1="677.96875" y2="677.96875" stroke="#000000" fill="none" style="stroke-width: 2; stroke-dasharray: 6, 2; marker-end: url(&quot;#markerArrowBlock&quot;);"></line></g></svg>